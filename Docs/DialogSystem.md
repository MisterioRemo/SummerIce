>Для каждого уровня есть свой файл с диалогами в формате json, который подгружается в начале игры/переходе на новый уровень (карту) из `SummerIceGameModeBase`. \
Файлы согласуются по индексу. Т.е. карта имеет название `XX_MapName`, где `XX` - индекс (например 01, 02, 24, 89), а диалог `Chapter_X`, где `X` - соответствующий карте индекс (например 1, 2, 24, 89). 

Для парсинга json используется опенсорсная библиотека [nlohmann](https://nlohmann.github.io/json/classnlohmann_1_1basic__json_ab4f78c5f9fd25172eeec84482e03f5b7.html#ab4f78c5f9fd25172eeec84482e03f5b7).  
За процесс парсинга диалога отвечает класс `DialogTree`.

Структура диалога в `Chapter_X`.  
- **dialogs** - верхний контейнер для всех нод-диалогов на карте `XX_MapName`;  
- **dialog_id** - уникальный номер диалога;  
- **nodes** - узлы диалога, содержащию информацию о том кто говорит, что говорит и каким будет ответ на данную реплику;  
- **node_id** - уникальный номер ноды для данного **dialog_id**;
- **character** - индетификатор говорящего, список доступных персонажей перечислен в `ECharacter`;
- **speech** - реплика говорящего, должна быть достаточно короткой, чтобы не растягивать бабл слишком сильно;
- **answers** - дальнейшая цепочка нод диалога;
- **next** - необязательное свойство, в котором указывается **node_id** ответной реплики.

Для каждого нового **dialog_id** его первый **node_id** должен быть равен 0.  
Чтобы игрок мог выбрать одну из фраз, нужно расополжить ноды на одном уровне. См. примеры ниже (есть два случая, когда выбор - первый узел или не первый).  
Нельзя прервать диалог.  
Завершив диалог к нему невозможно вернуться вновь.
У каждого актора на сцене, способного к диалогу, есть поле **Dialog Id**, соответствующее **dialog_id**.

```json
{
  "dialogs": [
    {
      "dialog_id": 0,
      "nodes": [
        {
          "node_id": 0,
          "character": "Lavinia",
          "speech": "Привет!",
          "answers": [
            {
              "node_id": 1,
              "character": "Elizabeth",
              "speech": "Привет. Это должен быть достаточно длинный текст, чтобы протестировать размер бабла.",
              "answers": [
                {
                  "node_id": 2,
                  "character": "Lavinia",
                  "speech": "Есть минутка.",
                  "answers": [],
                  "next": 4
                },
                {
                  "node_id": 3,
                  "character": "Lavinia",
                  "speech": "Пока.",
                  "answers": []
                }
              ]
            },
            {
              "node_id": 4,
              "character": "Elizabeth",
              "speech": "Я спешу.",
              "answers": [],
              "next": 3
            }
          ]
        }
      ]  
    },
    {
      "dialog_id": 1,
      "nodes": [
        {
          "node_id": 0,
          "character": "",
          "speech": "",
          "answers": [
            {
              "node_id": 1,
              "character": "Lavinia",
              "speech": "Взять",
              "answers": []
            },
            {
              "node_id": 2,
              "character": "Lavinia",
              "speech": "Не взять",
              "answers": []
            }
          ]
        }
      ]
    }

  ]
}
```

### В планах:
- Добавить визуализатор диалога, чтобы удобного его состяавлять и видеть взаимосвязи.
- Переделать **speech** в массив реплик, чтобы длинные тексты разбивать на кароткии в пределах одной реплики.